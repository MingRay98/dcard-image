{"version":3,"sources":["component/image/styles.js","component/image/index.jsx"],"names":["container","display","width","height","flexWrap","margin","justifyContent","overflowY","loading","color","alignItems","fontSize","fontWeight","postContainer","backgroundColor","borderRadius","boxShadow","postTitle","textAlign","fontFamily","cursor","school","fontStyle","imageDiv","overflow","imageContainer","maxWidth","maxheight","objectFit","postExcerpt","pet","props","getExcerpt","e","element","target","parentElement","childNodes","console","log","x","clientX","document","body","scrollLeft","y","clientY","scrollTop","style","left","top","outExcerpt","getDcardAPIPost","nextProps","setState","ps","items","error","url","type","fetch","mode","then","res","json","result","state","push","loaded","background","handleImageLoad","addEventListener","alert","this","styles","message","map","post","key","createdAt","id","onClick","window","open","title","innerWidth","anonymousSchool","anonymousDepartment","department","likeCount","media","imgData","index","href","alt","src","onLoad","withImages","excerpt","Component","Radium"],"mappings":"oMAAe,GACbA,UAAW,CACTC,QAAS,OACTC,MAAO,OACPC,OAAQ,OACRC,SAAU,OACVC,OAAQ,OACRC,eAAgB,eAChBC,UAAW,QAEbC,QAAS,CACPC,MAAO,OACPR,QAAS,OACTS,WAAY,SACZC,SAAU,OACVC,WAAY,QAEdC,cAAe,CACbZ,QAAS,OACTG,SAAU,OACVE,eAAgB,eAChBQ,gBAAiB,QACjBT,OAAQ,KACRU,aAAc,OACdb,MAAO,OACP,SAAU,CACRc,UAAW,4BAGfC,UAAW,CACTf,MAAO,UACPgB,UAAW,SACXb,OAAQ,KACRI,MAAO,UACPE,SAAU,OACVQ,WAAY,iCACZP,WAAY,OACZQ,OAAQ,UACR,SAAU,CACRX,MAAO,SAET,4CAA6C,CAC3CE,SAAU,SAGdU,OAAQ,CACNnB,MAAO,cACPO,MAAO,QACPJ,OAAQ,KACRiB,UAAW,UACXX,SAAU,MACVQ,WAAY,UACZP,WAAY,OACZX,QAAS,cACT,4CAA6C,CAC3CU,SAAU,QAGdY,SAAU,CACRlB,OAAQ,SACRH,MAAO,OACPC,OAAQ,OACRqB,SAAU,SACV,SAAU,CACRR,UAAW,2BAEb,4CAA6C,CAC3Cd,MAAO,OACPC,OAAQ,SAGZsB,eAAgB,CACdvB,MAAO,OACPwB,SAAU,OACVvB,OAAQ,OACRwB,UAAW,OACXtB,OAAQ,OACRuB,UAAW,UACX,4CAA6C,CAC3CF,SAAU,OACVC,UAAW,SAEZE,YAAa,CACdxB,OAAQ,aACRM,SAAU,OACVQ,WAAY,iCACZP,WAAY,OACZ,4CAA6C,CAC3CD,SAAU,S,6jBCpFVmB,E,YACJ,WAAYC,GAAQ,IAAD,8BACjB,4CAAMA,KAQRC,WAAa,SAACC,GACZ,IAAMC,EAAUD,EAAEE,OAAOC,cAAcA,cAAcA,cAAcC,WAAW,GAC9EC,QAAQC,IAAIL,GACZ,IAAIM,EAAIP,EAAEQ,QAAUC,SAASC,KAAKC,WAAa,GAC3CC,EAAIZ,EAAEa,QAAUJ,SAASC,KAAKI,UAAY,EAC9Cb,EAAQc,MAAMC,KAAOT,EAAI,KACzBN,EAAQc,MAAME,IAAML,EAAI,KACxBX,EAAQc,MAAM/C,QAAU,SAhBP,EAmBnBkD,WAAa,SAAClB,GACIA,EAAEE,OAAOC,cAAcA,cAAcA,cAAcC,WAAW,GACtEW,MAAM/C,QAAU,QArBP,EA+BnBmD,gBAAkB,WAA6B,IAA5BC,EAA2B,uDAAf,EAAKtB,MAClC,EAAKuB,UAAS,SAACC,GAAD,YAAaA,EAAb,CAAiBC,MAAO,GAAIC,MAAO,KAAMjD,SAAS,OAChE,IAAMkD,EAAG,2CAAuCL,EAAUM,KAAjD,uBACTrB,QAAQC,IAAImB,GACZE,MAAMF,EAAK,CACTG,KAAM,SAELC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MACC,SAAAG,GACE,IAAMT,EAAQ,EAAKU,MAAMV,MACzBA,EAAMW,KAAKF,GACX,EAAKX,SAAS,CACZ9C,SAAS,EACTgD,MAAOA,OAGX,SAAAC,GACE,EAAKH,SAAS,CACZ9C,SAAS,EACTiD,cAnDS,EAyDnBW,OAAS,SAACnC,GACRA,EAAEe,MAAMqB,WAAa,QA1DJ,EA6DnBC,gBAAkB,SAACrC,GACjBA,EAAEE,OAAOoC,iBAAiB,OAAQ,EAAKH,OAAOnC,EAAEE,SAChDF,EAAEE,OAAOoC,iBAAiB,SAAS,WACjCC,MAAM,aA9DR,EAAKN,MAAQ,CACXT,MAAO,KACPjD,SAAS,EACTgD,MAAO,IALQ,E,uFAwBOH,GACxBoB,KAAKrB,gBAAgBC,K,0CAGrBoB,KAAKrB,oB,+BAwCG,IAAD,SACyBqB,KAAKP,MAA9BT,EADA,EACAA,MAAOjD,EADP,EACOA,QAASgD,EADhB,EACgBA,MACvB,OACE,yBAAKR,MAAO0B,EAAO1E,WAChBQ,GAAW,yBAAKwC,MAAO0B,EAAOlE,SAAnB,eACVA,GAAWiD,GAAS,uCAAaA,EAAMkB,UACvCnE,IAAYiD,GAASD,IAAUA,EAAM,GAAGC,OAASD,EAAM,GAAGoB,KAAI,SAAAC,GAAI,OAClE,yBAAK7B,MAAO0B,EAAO7D,cAAeiE,IAAKD,EAAKE,WAC1C,yBAAK/B,MAAO0B,EAAOzD,UAAW6D,IAAKD,EAAKG,GACtCC,QAAS,kBAAMC,OAAOC,KAAP,iCAAsC,EAAKpD,MAAM4B,KAAjD,cAA2DkB,EAAKG,MAAO7C,OAAO,UAC5F0C,EAAKO,MACN,yBAAKpC,MAAO0B,EAAOrD,OAAQyD,IAAK,QAAUD,EAAKG,IAAME,OAAOG,WAAa,KAAO,8BACpD,IAAzBR,EAAKS,iBAA6BT,EAAKxD,OAD1C,KACgF,IAA7BwD,EAAKU,qBAAiCV,EAAKW,WAC5F,yBAAKxC,MAAO,CAACvC,MAAO,MAAOa,UAAW,UAAWwD,IAAK,QAAUD,EAAKG,IAArE,IAA2E,SAAIH,EAAKY,UAApF,cAGHZ,EAAKa,MAAMd,KAAI,SAACe,EAASC,GAAV,OACd,6BACE,yBAAKd,IAAKa,EAAQjC,IAAMkC,EAAO5C,MAAO0B,EAAOnD,UAC3C,uBAAGyB,MAAO,CAAC/C,QAAS,QAAS4F,KAAMF,EAAQjC,IAAKvB,OAAO,UACrD,yBAAKa,MAAO0B,EAAOjD,eAAgBqE,IAAI,GAAGC,IAAKJ,EAAQjC,IAAKsC,OAAQ,SAAC/D,GAAD,OAAO,EAAKqC,gBAAgBrC,aAKnF,IAApB4C,EAAKoB,YAAwC,GAAhBpB,EAAKqB,SAAoB,yBAAKlD,MAAO0B,EAAO7C,aAAegD,EAAKqB,QAAvC,OAAmD,yBAAKlD,MAAO,CAACvC,MAAO,OAAQwE,QAAS,kBAAMT,MAAM,4DAAjD,wC,GA9FpG2B,aAqGHC,sBAAOtE","file":"static/js/3.5aadf119.chunk.js","sourcesContent":["export default {\r\n  container: {\r\n    display: 'flex',\r\n    width: '85vw',\r\n    height: '90vh',\r\n    flexWrap: 'wrap',\r\n    margin: 'auto',\r\n    justifyContent: 'space-around',\r\n    overflowY: 'auto',\r\n  },\r\n  loading: {\r\n    color: 'pink',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    fontSize: '50px',\r\n    fontWeight: 'bold',\r\n  },\r\n  postContainer: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'space-around',\r\n    backgroundColor: 'wheat',\r\n    margin: '2%',\r\n    borderRadius: '25px',\r\n    width: '100%',\r\n    ':hover': {\r\n      boxShadow: '-5px 9px 14px 0px black',\r\n    },\r\n  },\r\n  postTitle: {\r\n    width: 'inherit',\r\n    textAlign: 'center',\r\n    margin: '2%',\r\n    color: 'darkred',\r\n    fontSize: '150%',\r\n    fontFamily: '微軟正黑體',\r\n    fontWeight: 'bold',\r\n    cursor: 'pointer',\r\n    ':hover': {\r\n      color: 'black',\r\n    },\r\n    '@media only screen and (max-width: 550px)': {\r\n      fontSize: '110%',\r\n    },\r\n  },\r\n  school: {\r\n    width: 'fit-content',\r\n    color: 'black',\r\n    margin: '2%',\r\n    fontStyle: 'italic ',\r\n    fontSize: '70%',\r\n    fontFamily: 'inherit',\r\n    fontWeight: 'bold',\r\n    display: 'inline-flex',\r\n    '@media only screen and (max-width: 550px)': {\r\n      fontSize: '40%',\r\n    },\r\n  },\r\n  imageDiv: {\r\n    margin: '0 0 8%',\r\n    width: 'auto',\r\n    height: 'auto',\r\n    overflow: 'hidden',\r\n    ':hover': {\r\n      boxShadow: '-5px 9px 14px 0px black',\r\n    },\r\n    '@media only screen and (max-width: 550px)': {\r\n      width: 'auto',\r\n      height: 'auto',\r\n    },\r\n  },\r\n  imageContainer: {\r\n    width: 'auto',\r\n    maxWidth: '60vw',\r\n    height: 'auto',\r\n    maxheight: '35vh',\r\n    margin: 'auto',\r\n    objectFit: 'contain',\r\n    '@media only screen and (max-width: 550px)': {\r\n      maxWidth: '60vw',\r\n      maxheight: '65vh',\r\n    }\r\n  }, postExcerpt: {\r\n    margin: '0 5% 5% 5%',\r\n    fontSize: '125%',\r\n    fontFamily: '微軟正黑體',\r\n    fontWeight: 'bold',\r\n    '@media only screen and (max-width: 550px)': {\r\n      fontSize: '95%'\r\n    },\r\n  }\r\n}","import React, {Component} from \"react\";\r\nimport Radium from 'radium';\r\nimport styles from './styles'\r\n\r\nclass pet extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      error: null,\r\n      loading: true,\r\n      items: []\r\n    };\r\n  }\r\n\r\n  getExcerpt = (e) => {\r\n    const element = e.target.parentElement.parentElement.parentElement.childNodes[2]\r\n    console.log(element)\r\n    let x = e.clientX + document.body.scrollLeft + 20;\r\n    let y = e.clientY + document.body.scrollTop - 5;\r\n    element.style.left = x + \"px\";\r\n    element.style.top = y + \"px\";\r\n    element.style.display = \"block\";\r\n  }\r\n\r\n  outExcerpt = (e) => {\r\n    const element = e.target.parentElement.parentElement.parentElement.childNodes[2]\r\n    element.style.display = \"none\";\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    this.getDcardAPIPost(nextProps)\r\n  }\r\n  componentDidMount() {\r\n    this.getDcardAPIPost()\r\n  }\r\n\r\n  getDcardAPIPost = (nextProps = this.props) => {\r\n    this.setState((ps) => ({...ps, items: [], error: null, loading: true}));\r\n    const url = `https://www.dcard.tw/_api/forums/${nextProps.type}/posts?popular=true`\r\n    console.log(url)\r\n    fetch(url, {\r\n      mode: \"cors\"\r\n    })\r\n      .then(res => res.json())\r\n      .then(\r\n        result => {\r\n          const items = this.state.items;\r\n          items.push(result);\r\n          this.setState({\r\n            loading: false,\r\n            items: items\r\n          });\r\n        },\r\n        error => {\r\n          this.setState({\r\n            loading: false,\r\n            error\r\n          });\r\n        }\r\n      );\r\n  }\r\n\r\n  loaded = (e) => {\r\n    e.style.background = 'none';\r\n  }\r\n\r\n  handleImageLoad = (e) => {\r\n    e.target.addEventListener('load', this.loaded(e.target))\r\n    e.target.addEventListener('error', function () {\r\n      alert('error')\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {error, loading, items} = this.state;\r\n    return (\r\n      <div style={styles.container}>\r\n        {loading && <div style={styles.loading} >Loading...</div>}\r\n        {!loading && error && <div>Error: {error.message}</div>}\r\n        {!loading && !error && items && !items[0].error && items[0].map(post =>\r\n          <div style={styles.postContainer} key={post.createdAt}>\r\n            <div style={styles.postTitle} key={post.id}\r\n              onClick={() => window.open(`https://www.dcard.tw/f/${this.props.type}/p/${post.id}`)} target=\"_blank\">\r\n              {post.title}\r\n              <div style={styles.school} key={'Name_' + post.id}>{ window.innerWidth < 600 && <br/>}\r\n                {post.anonymousSchool === false && post.school} {post.anonymousDepartment === false && post.department}\r\n                <div style={{color: 'red', fontStyle: 'normal'}} key={'love_' + post.id}> {\"　\"+post.likeCount} ❤ </div>\r\n              </div>\r\n            </div>\r\n            {post.media.map((imgData, index) =>\r\n              <div>\r\n                <div key={imgData.url + index} style={styles.imageDiv}>\r\n                  <a style={{display: 'flex'}} href={imgData.url} target=\"_blank\">\r\n                    <img style={styles.imageContainer} alt=\"\" src={imgData.url} onLoad={(e) => this.handleImageLoad(e)} />\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            )}\r\n            {post.withImages === false && post.excerpt != false && <div style={styles.postExcerpt} >{post.excerpt}... <div style={{color: 'red'}} onClick={() => alert('騙你的，你要點標題')}>(閱覽全部)</div></div>}\r\n          </div>)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Radium(pet);\r\n"],"sourceRoot":""}