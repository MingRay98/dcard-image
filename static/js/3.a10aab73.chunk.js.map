{"version":3,"sources":["component/image/styles.js","component/image/index.jsx"],"names":["container","display","width","height","flexWrap","margin","justifyContent","overflowY","loading","color","alignItems","fontSize","fontWeight","postContainer","backgroundColor","borderRadius","boxShadow","postTitle","textAlign","fontFamily","cursor","school","fontStyle","imageDiv","overflow","imageContainer","maxWidth","maxHeight","objectFit","maxheight","postExcerpt","pet","props","getExcerpt","e","element","target","parentElement","childNodes","console","log","x","clientX","document","body","scrollLeft","y","clientY","scrollTop","style","left","top","outExcerpt","getDcardAPIPost","nextProps","setState","ps","items","error","url","myHeaders","Headers","fetch","mode","headers","then","res","json","result","state","push","loaded","background","handleImageLoad","addEventListener","alert","getGenderStyle","gender","Object","assign","this","type","window","location","pathname","replace","styles","message","map","post","key","createdAt","id","onClick","open","forumAlias","title","innerWidth","anonymousSchool","anonymousDepartment","department","likeCount","media","imgData","index","href","alt","src","onLoad","withImages","excerpt","Component","Radium"],"mappings":"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","file":"static/js/3.a10aab73.chunk.js","sourcesContent":["export default {\r\n    container: {\r\n        display: 'flex',\r\n        width: '85vw',\r\n        height: '90vh',\r\n        flexWrap: 'wrap',\r\n        margin: 'auto',\r\n        justifyContent: 'space-around',\r\n        overflowY: 'auto',\r\n    },\r\n    loading: {\r\n        color: 'pink',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        fontSize: '50px',\r\n        fontWeight: 'bold',\r\n    },\r\n    postContainer: {\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n        justifyContent: 'space-around',\r\n        backgroundColor: 'white',\r\n        margin: '2%',\r\n        borderRadius: '25px',\r\n        width: '100%',\r\n        ':hover': {\r\n            boxShadow: '-5px 9px 14px 0px black',\r\n        },\r\n    },\r\n    postTitle: {\r\n        width: 'inherit',\r\n        textAlign: 'center',\r\n        margin: '2%',\r\n        color: 'darkred',\r\n        fontSize: '150%',\r\n        fontFamily: '微軟正黑體',\r\n        fontWeight: 'bold',\r\n        cursor: 'pointer',\r\n        ':hover': {\r\n            color: 'black',\r\n        },\r\n        '@media only screen and (max-width: 550px)': {\r\n            fontSize: '110%',\r\n        },\r\n    },\r\n    school: {\r\n        width: 'fit-content',\r\n        color: 'black',\r\n        margin: '2%',\r\n        fontStyle: 'italic ',\r\n        fontSize: '70%',\r\n        fontFamily: 'inherit',\r\n        fontWeight: 'bold',\r\n        display: 'inline-flex',\r\n        '@media only screen and (max-width: 550px)': {\r\n            fontSize: '40%',\r\n        },\r\n    },\r\n    imageDiv: {\r\n        margin: '0 0 8%',\r\n        width: 'auto',\r\n        height: 'auto',\r\n        overflow: 'hidden',\r\n        ':hover': {\r\n            boxShadow: '-5px 9px 14px 0px black',\r\n        },\r\n        '@media only screen and (max-width: 550px)': {\r\n            width: 'auto',\r\n            height: 'auto',\r\n        },\r\n    },\r\n    imageContainer: {\r\n        width: 'auto',\r\n        maxWidth: '60vw',\r\n        height: 'auto',\r\n        maxHeight: '35vh',\r\n        margin: 'auto',\r\n        objectFit: 'contain',\r\n        borderRadius:'25px',\r\n        '@media only screen and (max-width: 550px)': {\r\n            maxWidth: '60vw',\r\n            maxheight: '65vh',\r\n        }\r\n    },\r\n    postExcerpt: {\r\n        margin: '0 5% 5% 5%',\r\n        fontSize: '125%',\r\n        fontFamily: '微軟正黑體',\r\n        fontWeight: 'bold',\r\n        '@media only screen and (max-width: 550px)': {\r\n            fontSize: '95%'\r\n        },\r\n    }\r\n}","import React, {Component} from \"react\";\r\nimport Radium from 'radium';\r\nimport styles from './styles'\r\n\r\nclass pet extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      error: null,\r\n      loading: true,\r\n      items: []\r\n    };\r\n  }\r\n\r\n  getExcerpt = (e) => {\r\n    const element = e.target.parentElement.parentElement.parentElement.childNodes[2]\r\n    console.log(element)\r\n    let x = e.clientX + document.body.scrollLeft + 20;\r\n    let y = e.clientY + document.body.scrollTop - 5;\r\n    element.style.left = x + \"px\";\r\n    element.style.top = y + \"px\";\r\n    element.style.display = \"block\";\r\n  }\r\n\r\n  outExcerpt = (e) => {\r\n    const element = e.target.parentElement.parentElement.parentElement.childNodes[2]\r\n    element.style.display = \"none\";\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    this.getDcardAPIPost(nextProps.type)\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (window.location.pathname === '/')\r\n      this.getDcardAPIPost('home');\r\n    else {\r\n      let type = window.location.pathname.replace(/\\//g, \"\");\r\n      this.getDcardAPIPost(type);\r\n    }\r\n  }\r\n\r\n\r\n\r\n  getDcardAPIPost = (nextProps) => {\r\n    this.setState((ps) => ({...ps, items: [], error: null, loading: true}));\r\n    let url = `https://script.google.com/macros/s/AKfycbxsSAtVNsiUD1W8tVVqwhxrHesDxBJlm4aXYkEnIHKyAZRIc68s/exec?url=https://www.dcard.tw/_api/forums/${nextProps}/posts?popular=true`\r\n    if (nextProps === 'home')\r\n      url = 'https://script.google.com/macros/s/AKfycbxsSAtVNsiUD1W8tVVqwhxrHesDxBJlm4aXYkEnIHKyAZRIc68s/exec?url=https://www.dcard.tw/_api/posts?popular=true';\r\n    console.log(url)\r\n\r\n    let myHeaders = new Headers({\r\n      'Access-Control-Allow-Origin': '*',\r\n      'Content-Type': 'text/plain'\r\n    });\r\n\r\n    fetch(url, {\r\n      mode: \"cors\",\r\n      headers: myHeaders,\r\n    })\r\n      .then(res => res.json())\r\n      .then(\r\n        result => {\r\n          const items = this.state.items;\r\n          items.push(result);\r\n          this.setState({\r\n            loading: false,\r\n            items: items\r\n          });\r\n        },\r\n        error => {\r\n          this.setState({\r\n            loading: false,\r\n            error\r\n          });\r\n        }\r\n      );\r\n  }\r\n\r\n  loaded = (e) => {\r\n    e.style.background = 'none';\r\n  }\r\n\r\n  handleImageLoad = (e) => {\r\n    e.target.addEventListener('load', this.loaded(e.target))\r\n    e.target.addEventListener('error', function () {\r\n      alert('error')\r\n    })\r\n  }\r\n\r\n  getGenderStyle = (gender) => {\r\n    let style = {\r\n      width: '25px',\r\n      display: 'inline-block',\r\n      borderRadius: '50px',\r\n    }\r\n    gender === 'F' ? Object.assign(style, {\r\n      background: 'pink',\r\n    }) : Object.assign(style, {\r\n      background: 'blue',\r\n      color: 'white',\r\n    })\r\n    return style\r\n  }\r\n\r\n  render() {\r\n    const {error, loading, items} = this.state;\r\n    return (\r\n      <div style={styles.container}>\r\n        {loading && <div style={styles.loading} >Loading...</div>}\r\n        {!loading && this.props.type && <div style={styles.loading} >{this.props.type}</div>}\r\n        {!loading && !this.props.type && <div style={styles.loading} >即時熱門文章</div>}\r\n        {!loading && error && <div>Error: {error.message}</div>}\r\n        {!loading && !error && items && !items[0].error && items[0].map(post =>\r\n          <div style={styles.postContainer} key={post.createdAt}>\r\n            <div style={styles.postTitle} key={post.id}\r\n              onClick={() => window.open(`https://www.dcard.tw/f/${post.forumAlias}/p/${post.id}`)} target=\"_blank\">\r\n              <div style={this.getGenderStyle(post.gender)}>{post.gender}</div>{post.title}\r\n              <div style={styles.school} key={'Name_' + post.id}>{window.innerWidth < 600 && <br />}\r\n                {post.anonymousSchool === false && post.school} {post.anonymousDepartment === false && post.department}\r\n                <div style={{color: 'red', fontStyle: 'normal'}} key={'love_' + post.id}> {\"　\" + post.likeCount} ❤ </div>\r\n              </div>\r\n            </div>\r\n            {post.media.map((imgData, index) =>\r\n              <div key={index + 1}>\r\n                <div key={imgData.url + index} style={styles.imageDiv}>\r\n                  <a style={{display: 'flex'}} href={imgData.url} target=\"_blank\">\r\n                    <img style={styles.imageContainer} alt=\"\" src={imgData.url} onLoad={(e) => this.handleImageLoad(e)} />\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            )}\r\n            {post.withImages === false && post.excerpt != false && <div style={styles.postExcerpt} >{post.excerpt}... <div style={{color: 'red'}} onClick={() => alert('騙你的，你要點標題')}>(閱覽全部)</div></div>}\r\n          </div>)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Radium(pet);\r\n"],"sourceRoot":""}