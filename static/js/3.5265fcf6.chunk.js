(this["webpackJsonpdcard-image"]=this["webpackJsonpdcard-image"]||[]).push([[3],{96:function(e,t,n){"use strict";n.r(t);var r=n(40),o=n(17),a=n(18),i=n(20),l=n(19),c=n(22),d=n(0),s=n.n(d),p=n(21),u={container:{display:"flex",width:"85vw",height:"90vh",flexWrap:"wrap",margin:"auto",justifyContent:"space-around",overflowY:"auto"},loading:{color:"pink",display:"flex",alignItems:"center",fontSize:"50px",fontWeight:"bold"},postContainer:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",backgroundColor:"wheat",margin:"2%",borderRadius:"50px",width:"100%",":hover":{boxShadow:"-5px 9px 14px 0px black"}},postTitle:{width:"inherit",textAlign:"center",margin:"2%",color:"darkred",fontSize:"150%",fontFamily:"\u5fae\u8edf\u6b63\u9ed1\u9ad4",fontWeight:"bold",cursor:"pointer",":hover":{color:"black"}},imageDiv:{margin:"0 0 8%",width:"auto",maxWidth:"60vw",height:"25vw",overflow:"hidden",":hover":{boxShadow:"-5px 9px 14px 0px black"},"@media only screen and (max-width: 550px)":{width:"auto",height:"auto"}},imageContainer:{width:"auto",height:"25vw",margin:"auto",objectFit:"contain","@media only screen and (max-width: 550px)":{width:"60vw",height:"65vw"}},postExcerpt:{margin:"0 5% 5% 5%",fontSize:"125%",fontFamily:"\u5fae\u8edf\u6b63\u9ed1\u9ad4",fontWeight:"bold"}};function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(l.a)(t).call(this,e))).getExcerpt=function(e){var t=e.target.parentElement.parentElement.parentElement.childNodes[2];console.log(t);var n=e.clientX+document.body.scrollLeft+20,r=e.clientY+document.body.scrollTop-5;t.style.left=n+"px",t.style.top=r+"px",t.style.display="block"},n.outExcerpt=function(e){e.target.parentElement.parentElement.parentElement.childNodes[2].style.display="none"},n.getDcardAPIPost=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props;n.setState((function(e){return f({},e,{items:[],loading:!0})}));var t="https://www.dcard.tw/_api/forums/".concat(e.type,"/posts?popular=true");console.log(t),fetch(t,{mode:"cors"}).then((function(e){return e.json()})).then((function(e){var t=n.state.items;t.push(e),n.setState({loading:!1,items:t})}),(function(e){n.setState({loading:!1,error:e})}))},n.loaded=function(e){e.style.background="none"},n.handleImageLoad=function(e){e.target.addEventListener("load",n.loaded(e.target)),e.target.addEventListener("error",(function(){alert("error")}))},n.state={error:null,loading:!0,items:[]},n}return Object(c.a)(t,e),Object(a.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.getDcardAPIPost(e)}},{key:"componentDidMount",value:function(){this.getDcardAPIPost()}},{key:"render",value:function(){var e=this,t=this.state,n=t.error,r=t.loading,o=t.items;return s.a.createElement("div",{style:u.container},r&&s.a.createElement("div",{style:u.loading},"Loading..."),!r&&n&&s.a.createElement("div",null,"Error: ",n.message),!r&&!n&&o&&!o[0].error&&o[0].map((function(t){return s.a.createElement("div",{style:u.postContainer,key:t.createdAt},s.a.createElement("div",{style:u.postTitle,key:t.id,onClick:function(){return window.open("https://www.dcard.tw/f/".concat(e.props.type,"/p/").concat(t.id))},target:"_blank"},t.title),t.media.map((function(t,n){return s.a.createElement("div",null,s.a.createElement("div",{key:t.url+n,style:u.imageDiv},s.a.createElement("a",{style:{display:"flex"},href:t.url,target:"_blank"},s.a.createElement("img",{style:u.imageContainer,alt:"",src:t.url,onLoad:function(t){return e.handleImageLoad(t)}}))))})),!1===!t.media&&0!=t.excerpt&&s.a.createElement("div",{style:u.postExcerpt},t.excerpt,"... ",s.a.createElement("div",{style:{color:"red"},onClick:function(){return alert("\u9a19\u4f60\u7684\uff0c\u4f60\u8981\u9ede\u6a19\u984c")}},"(\u95b1\u89bd\u5168\u90e8)")))})))}}]),t}(d.Component);t.default=Object(p.a)(h)}}]);
//# sourceMappingURL=3.5265fcf6.chunk.js.map